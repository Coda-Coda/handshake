<!DOCTYPE html>
<html>

<head>

  <meta property="og:url" content="https://coda-coda.github.io/handshake/Generator/" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Handshake Prototype: Track your proximity to COVID-19" />
  <meta property="og:description" content="Scan someone’s QR code to handshake. Handshakes between anonymous ids are recorded publicly." />
  <meta property="og:image" content="https://coda-coda.github.io/handshake/large_logo_open_graph.png" />
  <meta property="og:image:secure_url" content="https://coda-coda.github.io/handshake/large_logo_open_graph.png" />

  <link rel="shortcut icon" href="https://coda-coda.github.io/handshake/favicon.ico">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script type="text/javascript" src="qrcode.js">
  </script>
  <script type="text/javascript" src="html5-qrcode.js">
  </script>

  <script type="application/javascript" src="../jsHashes-master/hashes.js"></script>
  <script type="application/javascript"></script>
  <script>
    function copyID() {
      document.getElementById("hashedToCopy").value = "Person_" + hashGenerated;
      document.getElementById("hashedToCopy").style.visibility = 'visible';
      var copyText = document.getElementById("hashedToCopy");
      copyText.select();
      copyText.setSelectionRange(0, 99999)
      document.execCommand("copy");
      document.getElementById("hashedToCopy").style.visibility = 'hidden';
      //alert("Copied: " + copyText.value);
      alert("Copied");
    }
    function copyURL() {
      document.getElementById("urlToCopy").value = urlGenerated;
      document.getElementById("urlToCopy").style.visibility = 'visible';
      var copyText = document.getElementById("urlToCopy");
      copyText.select();
      copyText.setSelectionRange(0, 99999)
      document.execCommand("copy");
      document.getElementById("urlToCopy").style.visibility = 'hidden';
      //alert("Copied: " + copyText.value);
      alert("Copied");
    }
  </script>


  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    Handshake Generator
  </title>
  <style type="text/css" media="screen">
    body {
      text-align: center;
    }
  </style>
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:900&display=swap" rel="stylesheet">
</head>

<body>


  <script type="text/javascript">
    function updateQRCode(text) {

      var element = document.getElementById("qrcode");

      var bodyElement = document.body;
      if (element.lastChild)
        element.replaceChild(showQRCode(text), element.lastChild);
      else
        element.appendChild(showQRCode(text));

    }

    updateQRCode('ERROR');
  </script>

  <br>
  <h1><span class="heading_hand">Hand</span><span class="heading_shake">shake</span></h1>

  <span class="subheading">Track your proximity to COVID-19</span>
  <br>
  <br>
  <span class="normal_text">Create your anonymous id:</span>
  <br>
  <br>

  <form name="QRform" id="QRform" onsubmit="event.preventDefault();
      hashGenerated = new Hashes.SHA256().hex(document.getElementById('email').value + document.getElementById('privacyPassphrase').value);
      urlGenerated = 'https\:\/\/coda-coda.github.io/handshake/Reader/index.html?them=Person_' + hashGenerated;
      document.getElementById('hashed').innerText = 'Person_' + hashGenerated;
      document.getElementById('urlGenerated').innerHTML = '<a class=\'tiny_text\' href=' + urlGenerated + '>' + urlGenerated + '</a>';
      updateQRCode(urlGenerated);
      document.getElementById('generatedContent').style.visibility = 'visible';
      ">


    <table class="center">
      <tr>
        <td style="text-align: right;"><span class="normal_text">Email (<a class="normal_text"
              href="https://coda-coda.github.io/handshake/handshake2/Generator/">optional</a>):</span> </td>
        <td><input type="text" name="email" id="email" rows="8" cols="50"></td>
      </tr>
      <tr>
        <td style="text-align: right;"><span class="secondary_text">Hand</span><span class="normal_text">shake</span>
          <span class="normal_text">Password:</span> </td>
        <td><input type="password" id="privacyPassphrase" name="pwd"></td>
      </tr>
    </table>
    <span class="tiny_text"><a class="tiny_text"
        href="https://coda-coda.github.io/handshake/handshake2/Generator/">Click here for tips on generating a QR code
        without using your email address</a></span>
    <br>
    <span class="tiny_text"><a class="tiny_text" href="https://coda-coda.github.io/handshake/locations/Generator/">Click
        here to generate a QR code for a location instead</a></span>
    <br>
    <input class="submit_button" type="submit" value="Click here to generate your Handshake QR code">
  </form>


  <!-- This is where our QRCode will appear in. -->
  <span id="generatedContent" style="visibility:hidden">
    <div id="qrcode" style="width: 250px; background-color: white;  margin-left:auto; margin-right:auto;"></div>


    <span class="small_text">Your anonymous ID is:</span>
    <span class="tiny_text">
      <div id="hashed"></div>
    </span>
    <button class="copy_button" onclick="copyID()">Click here to copy your anonymous ID to clipboard</button>

    <br>

    <span class="small_text">Your generated URL is:</span><span class="tiny_text">
      <div id="urlGenerated"></div>
    </span>
    <span class="tiny_text">(send this to people you physically meet with if QR code scanning is not working)</span>
    <br>
    <button class="copy_button" onclick="copyURL()">Click here to copy your URL to clipboard</button>


  </span>

  <br>
  <br>


  <span class="normal_text">Scan someone’s QR code to handshake. Handshakes between anonymous ids are recorded
    publicly.</span>

  <br>
  <br>

  <span class="small_text">

    <a class="normal_text" href="https://coda-coda.github.io/handshake/Checker/">View your proximity to cases of
      COVID-19</a>
    <br>
    <a class="normal_text" href="https://forms.gle/DWQRNfaeBrwB3oD58">Submit your own health status</a>
    <br>
    <a class="normal_text" href="https://coda-coda.github.io/handshake/Share/">Share Handshake with others</a>
    <br>
  </span>

  <br>
  <br>



  <span class="normal_text">How this works:
    <br>
    <span class="small_text">

      <br>
      Your email address and password are combined then '<a class="small_text"
        href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">hashed</a>' to form a unique id.
      <br>
      <br>
      This is done in your browser, your email address in plain text never leaves your phone or computer. (If you prefer
      not to use your email address at all, you can).
      <br>
      <br>
      Due to this you do not and cannot receive email notifications from submitting your email address on this page.
      <br>
      <br>
      Assuming you used a strong unique password, it is virtually impossible to go from the hash alone back to your
      email address.
      <br>
      <br>
      However, people still may be able to <a class="small_text"
        href="https://en.wikipedia.org/wiki/Data_re-identification">reidentify you</a>, especially those who know
      your whereabouts or people you handshake with.
      <br>
      <br>
      This is Open Source and so you can <a class="small_text" href="https://github.com/Coda-Coda/handshake/">check
        the source code</a> or "View Source" in your browser as it is only HTML and Javascript.
      <br>
      <br>
      No guarantee of privacy, accuracy of information <a class="small_text"
        href="https://github.com/Coda-Coda/handshake/blob/master/LICENSE">or any guarantee whatsoever</a> is provided.
      </li>
      </ul>
    </span>

    <br>
    <br>

    <span class="normal_text">See the public record (raw data):

      <br>
      <span class="small_text">
        <br>
        <a class="small_text"
          href="https://docs.google.com/spreadsheets/d/11LaeMly8CQdM7R7MsvE2GSdWZLySA4hNaQ9GrBg53TE/edit?usp=sharing">Handshakes
          Google Spreadsheet</a>
        <br>
        <a class="small_text"
          href="https://docs.google.com/spreadsheets/d/1hcjN_L62VK7hPSIKkfc0YRdFE8ULYG-ebpGgSw3kxgc/edit?usp=sharing">Status
          Reports Google Spreadsheet</a>
        <br>

      </span>

      <br>

      <span class="normal_text">If you want to get involved:</span>
      <span class="small_text">
        <br>
        <br>
        <a class="small_text" href="https://github.com/Coda-Coda/handshake/issues/new">Report an issue on GitHub
          (publicly)</a>
        <br>
        <a class="small_text" href="https://github.com/Coda-Coda/handshake/">Get involved on GitHub</a>
        <br>

        <a class="small_text" href="mailto:get.involved.handshake@gmail.com">Send an email to
          get.involved.handshake@gmail.com</a>
        <br>
      </span>

    </span>

    <input id="hashedToCopy" style="visibility: hidden;"></input>
    <!--Trick to enable copying to clipboard-->
    <input id="urlToCopy" style="visibility:hidden;"></input>

</body>