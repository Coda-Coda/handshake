<!DOCTYPE html>

<head>
  <script>
    them = window.location.search.replace("?them=", "");
  </script>


  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Handshake Reader</title>

  <script type="application/javascript" src="../jsHashes-master/hashes.js"></script>
  <script type="application/javascript"></script>

  <style type="text/css" media="screen">
    body {
      text-align: center;
    }
  </style>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:900&display=swap" rel="stylesheet">


</head>

<body>
  </br>
  <h1><span class="heading_hand">Hand</span><span class="heading_shake">shake</span></h1>
  </br>
  <span class="subheading">Track your proximity to COVID-19</span>
  </br>
  </br>
  <span class="normal_text">Create your anonymous id:</span>
  </br>
</br>

  <form name="IDform" id="IDform" onsubmit="event.preventDefault();
      hashGenerated = new Hashes.SHA256().hex(document.getElementById('email').value + document.getElementById('privacyPassphrase').value);
      urlGenerated = 'https\:\/\/docs.google.com/forms/d/e/1FAIpQLSeIDZrpksYUhL5DZ4T1mF-8lqj8a5tjO6SDk_MfzP4HIt3tDg/viewform?usp=pp_url&entry.895123374=Person_' + hashGenerated + '&entry.234110086=' + them;
      document.getElementById('redirectNotice').innerText = 'Redirecting to Google Forms shortly...';
      window.location.href = urlGenerated;
      ">

    <table class="center">
      <tr>
        <td><span class="normal_text">Email:</span> </td>
        <td><input type="text" name="email" id="email" rows="8" cols="50"></td>
      </tr>
      <tr>
        <td><span class="normal_text">Password:</span> </td>
        <td><input type="password" id="privacyPassphrase" name="pwd"></td>
      </tr>
    </table>
    </br>
    <input class="submit_button" type="submit" value="Shake hands">
  </form>
  <div id="redirectNotice" class="normal_text"></div>

</br>
</br>
  
  <span class="normal_text">Scan someoneâ€™s QR code to handshake. Handshakes between anonymous ids are recorded publicly (currently working). You can track your proximity to cases of COVID-19 (still to be developed).</span>
</br>
</br>
<span class="normal_text"> <a class="normal_text" href="https://github.com/Coda-Coda/handshake">How this works</a>, and <a class="normal_text" href="https://coda-coda.github.io/handshake/Checker/">see the public record</a></span>



</body>